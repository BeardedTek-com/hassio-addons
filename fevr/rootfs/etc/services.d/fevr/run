#!/usr/bin/with-contenv bashio
# ==============================================================================
# Start the example service
# s6-overlay docs: https://github.com/just-containers/s6-overlay
# ==============================================================================

# Add your code here

# Declare variables
#declare message
declare frigateUrl
declare sqlitewebPort
## Get the 'message' key from the user config options.
#message=$(bashio::config 'message')
frigateUrl=$(bashio::config 'frigateUrl')
sqlitewebPort=$(bashio::config 'sqlitewebPort')
## Print the message the user supplied, defaults to "Hello World..."
#bashio::log.info "${message:="Hello World..."}"

## Run your program
# exec my_program --with-params
exec sqlite_web -p ${sqlitewebPort:="8002"} -H 0.0.0.0 -x /var/www/db/fEVR.sqlite
exec sed -i '/http:\/\/frigate.mydomain.com/c\${frigateUrl}' /var/www/config/config.json